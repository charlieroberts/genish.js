'use strict'

/**
 * Memo
 * FIXME: Write documentation
 *
 * @name memo
 * @function
 * @param {ugen} input
 * @param {String} name
 * @return {ugen}
 * FIXME: @moduleof ?
 */

let gen = require('./gen.js')

let proto = {
  basename:'memo',

  gen() {
    let out,
        inputs = gen.getInputs( this )

    out = `  var ${this.name} = ${inputs[0]}\n`

    gen.memo[ this.name ] = this.name

    return [ this.name, out ]
  }
}

module.exports = (in1,memoName) => {
  let memo = Object.create( proto )

  memo.inputs = [ in1 ]
  memo.id   = gen.getUID()
  memo.name = memoName !== undefined ? memoName + '_' + gen.getUID() : `${memo.basename}${memo.id}`

  return memo
}
